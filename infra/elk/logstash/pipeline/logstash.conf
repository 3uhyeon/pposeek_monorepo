input {
    # Filebeat로부터 입력을 받음
    beats {
        port => 5044
    }
}

filter {
    # Filebeat가 추가한 service 필드를 기준으로 로그를 분기 처리할 수 있습니다.
    # 예를 들어, nginx 로그의 경우 추가적인 grok 처리가 가능합니다.
    # JSON 로그는 별도 필터 없이도 자동으로 파싱됩니다.
}

output {
    elasticsearch {
        hosts => ["http://elasticsearch:9200"]
        # 서비스별로 인덱스를 분리하거나, filebeat가 생성한 인덱스 사용 가능
        index => "filebeat-%{+YYYY.MM.dd}"
    }
    stdout { codec => rubydebug }
}